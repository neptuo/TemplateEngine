<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="Design/Styles/bootstrap.css" rel="stylesheet" />
    <link href="Design/Styles/bootstrap-theme.css" rel="stylesheet" />
    <link href="Design/Styles/My/Common.css" rel="stylesheet" />
    <link href="Design/Styles/My/Layout.css" rel="stylesheet" />

    <script src="Design/Scripts/jquery-1.9.1.js"></script>
    <script src="Design/Scripts/bootstrap.js"></script>

    <script src="Design/Scripts/Generated/Neptuo.System.Client.js"></script>

    <script src="Design/Scripts/Generated/Neptuo.js"></script>
    <script src="Design/Scripts/Generated/Neptuo.ObjectBuilder.js"></script>
    <script src="Design/Scripts/Generated/Neptuo.Bootstrap.js"></script>

    <script src="Design/Scripts/Generated/Neptuo.PresentationModels.js"></script>
    <script src="Design/Scripts/Generated/Neptuo.PresentationModels.TypeModels.DataAnnotations.js"></script>
    <script src="Design/Scripts/Generated/Neptuo.PresentationModels.TypeModels.js"></script>
    <script src="Design/Scripts/Generated/Neptuo.PresentationModels.Validation.js"></script>

    <script src="Design/Scripts/Generated/Neptuo.Templates.Components.js"></script>

    <script src="Design/Scripts/Generated/TemplateEngine/Neptuo.TemplateEngine.js"></script>
    <script src="Design/Scripts/Generated/TemplateEngine/Neptuo.TemplateEngine.Navigation.js"></script>
    <script src="Design/Scripts/Generated/TemplateEngine/Neptuo.TemplateEngine.Web.js"></script>
    <script src="Design/Scripts/Generated/TemplateEngine/Neptuo.TemplateEngine.Web.Client.js"></script>
    <script>
        JsRuntime.Start();

        var objectBuilder = new Neptuo.ObjectBuilder.DependencyContainer.ctor();
        Neptuo.DependencyContainerExtensions.RegisterInstance$1(Neptuo.Templates.IComponentManager.ctor, objectBuilder, new Neptuo.Templates.ComponentManager.ctor());
        Neptuo.DependencyContainerExtensions.RegisterInstance$1(Neptuo.IDependencyProvider.ctor, objectBuilder, objectBuilder);
        Neptuo.TemplateEngine.Web.Client.InitScript.Init(objectBuilder);

        var viewActivator = objectBuilder.Resolve(Typeof(Neptuo.TemplateEngine.Web.Client.StaticViewActivator.ctor), null);

    </script>
    <script src="/views.ashx"></script>
    <script>

        $(function () {

            $("a").click(function (e) {
                $this = $(this);
                var start = +new Date;

                var writer = new System.IO.StringWriter.ctor();
                var view = viewActivator.CreateView($this.data('view'));
                view.Setup(new Neptuo.Templates.BaseViewPage.ctor(objectBuilder.Resolve(Typeof(Neptuo.Templates.IComponentManager.ctor), null)), objectBuilder.Resolve(Typeof(Neptuo.Templates.IComponentManager.ctor), null), objectBuilder);
                view.CreateControls();
                view.Init();
                view.Render(new Neptuo.Templates.HtmlTextWriter.ctor(writer));
                view.Dispose();
                $("#target").html(writer.toString());

                $("#measure").html((+new Date) - start + "ms");

                history.pushState($this.data('view'), $this.html(), $this.attr('href'));
                e.preventDefault();
            });
        });
    </script>
</head>
<body>
    <div id="target"></div>
    <a href="/Accounts/UserList.aspx" data-view="~/Views/Accounts/UserList.view">User accounts</a>
    <a href="/Accounts/RoleList.aspx" data-view="~/Views/Accounts/RoleList.view">User Roles</a>
    <div id="measure"></div>
</body>
</html>
